# BTB Semantic
```json
{
    "local_user1_AddDevice": null,
    "local_user1_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'mqtt topic smart/mb/in/208580022462ab36ab23 with no explicit status payload'. Reason: MQTT traffic observed on topic smart/mb/in/208580022462ab36ab23 uniformly lacks explicit success or failure payloads or status codes, preventing conclusive operation outcome determination."
        ]
    ],
    "local_user1_RemoveDevice": [
        [
            "Operation result: Success. Evidence: ''type':'del''; 'success':true; 'status':'ok'. Reason: The consistent indication of device deletion intent through MQTT payload ''type':'del'', combined with HTTP responses reporting 'success':true and 'status':'ok', confirms successful device removal."
        ]
    ],
    "local_user1_SharePlug": [
        [
            "Operation result: Failed. Evidence: ''success':false,'errorCode':'REPETITION_SHARE''; ''success':false,'errorCode':'REPETITION_SHARE','errorMsg':'This device has already been shared with the user.''; ''success':false,'errorCode':'REPETITION_SHARE'' in /api.json/smartlife/m/sharing/device/account/add response'. Reason: The consensus indicates operation failure due to the device already being shared, explicitly denoted by errorCode REPETITION_SHARE in the payload."
        ],
        [
            "Operation result: Success. Evidence: ''success':true,'status':'ok'' for /api.json/smartlife/m/sharing/device/account/add'; ''success':true,'result':{'receiverName':'user2','relationId':117443320}'; ''success':true,'result':{'receiverName':'user2'}' in /api.json/smartlife/m/sharing/device/account/add response'. Reason: The majority consensus confirms successful addition of user2 as receiver in device sharing, demonstrated by explicit success flags and receiverName details in the payload."
        ]
    ],
    "local_user1_UnsharePlug": [
        [
            "Operation result: Success. Evidence: ''success':true,'status':'ok'' in /smartlife/m/sharing/device/remove response; '/api.json/smartlife/m/sharing/device/remove' with 'success':true and 'status':'ok'; 'success':true,'status':'ok' in multiple /sharing/device/remove and /sharing/resources/permit packets; '/api.json/smartlife/m/sharing/device/remove' success:true status:'ok' and subsequent member list with user2 status:false; 'success':true' and 'status':'ok' in /smartlife/m/sharing/device/remove'. Reason: Uniform payload-centric evidence from device remove API consistently confirms operation success, with 'success':true and 'status':'ok' repeatedly reported across multiple corresponding HTTP POST response packets, supported by user unsharing status update indicating operation completion."
        ]
    ],
    "local_user2_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'no explicit success or error status, encrypted MQTT flow'; 'No explicit status codes or error messages; encrypted MQTT message length and TCP flows only'; 'no explicit success or failure payload keywords or status codes; sustained mqtt tcp flow'; 'no explicit status/error codes or decisive keywords'; 'no explicit status or error code in MQTT payloads; partial bidirectional MQTT traffic'. Reason: The traffic consists of continuous bidirectional MQTT and TCP packets associated with user2 local control actions; however, these packets do not contain explicit success or failure status codes, error messages, or decisive payload keywords to determine the operation result."
        ],
        [
            "Operation result: Undetermined. Evidence: 'encrypted MQTT and TCP packets with no status codes'; 'Encrypted MQTT topic smart/mb/in/208580022462ab36ab23 with no explicit status or error messages'; 'absence of definitive success/failure keywords; MQTT topic smart/mb/in/208580022462ab36ab23 traffic presence'; 'mqtt topic smart/mb/in/208580022462ab36ab23 without status codes'; 'MQTT topic smart/mb/in/208580022462ab36ab23 traffic present without explicit success/error'. Reason: Despite persistent MQTT packets on topic smart/mb/in/208580022462ab36ab23 indicating user2's local activity, there are no explicit status codes, success or error messages, or any conclusive success/failure keywords in the payloads to confirm the operation outcome."
        ]
    ],
    "remote_user2_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'mqtt topic smart/mb/in/208580022462ab36ab23 with bidirectional small payloads'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with no explicit status payload'; 'bidirectional MQTT packets with topic smart/mb/in/208580022462ab36ab23'; 'MQTT topic smart/mb/in/208580022462ab36ab23 with limited payload and no status codes'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with multiple packets, no explicit success or error codes'. Reason: Consistent observations across reports indicate sustained MQTT traffic involving topic smart/mb/in/208580022462ab36ab23 characterized by small, bidirectional payloads lacking explicit success or failure codes, leading to an undetermined operation outcome due to absence of definitive control confirmation."
        ],
        [
            "Operation result: Undetermined. Evidence: 'single small MQTT payload length 1 byte with no status code'; 'single MQTT packet without status or error message'; 'single MQTT packet with no payload data'; 'Single MQTT packet with no decisive payload or status code'; 'single mqtt packet with no payload indicating status'. Reason: Observed data uniformly consists of singular MQTT packets with minimal or absent payloads and no status indicators, rendering the operation result inconclusive because of insufficient evidence to establish success or failure."
        ]
    ]
}
```

# State Semantic
## Base model
| State | Semantic Description                                                                                                      |
|-------|--------------------------------------------------------------------------------------------------------------------------|
| 0     | Initial state.                                                                                                            |
| 1     | user1 has added the device once; user2 has no permissions, invitations, or family membership.                             |
| 2     | Error state.                                                                                                              |
| 3     | user1 has added the device once and shared the device directly with user2; user2 has control permissions limited to this device instance only. |

## Divergent model
| State | Final Semantic Description |
|-------|-----------------------------|
| s0    | Initial state. No device added by user1; user2 has no permissions or sharing status. |
| s1    | user1 has added the device once; user2 has no sharing or control permissions. |
| s2    | Error state. |
| s3    | user1 added the device once and shared it directly with user2; user2 has device-specific control permissions under direct device sharing without family member status, with no manual acceptance required. |
| s4    | user1 added the device once and shared it directly with user2; user2 is actively controlling the device with operation outcome undetermined, holding device-specific control permissions. |
| s5    | user1 added the device once, shared it with user2, then revoked sharing; user2 no longer has any control permissions. |
| s6    | user1 added the device once, shared it with user2, then removed the device; user2â€™s device-specific control permissions have been revoked due to device removal. |
| s7    | user1 removed then re-added the same device once; user2 has no control permissions as sharing was not repeated after re-addition. |
| s8    | user1 re-added the device and re-shared it with user2; user2 has device-specific control permissions on the current device instance via direct device sharing. |

# Bug Reports
## Base model
No issues found.

## Divergent model
No issues found.