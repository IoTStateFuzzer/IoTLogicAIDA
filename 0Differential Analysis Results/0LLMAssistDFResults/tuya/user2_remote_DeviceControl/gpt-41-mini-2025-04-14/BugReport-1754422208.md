# BTB Semantic
```json
{
    "local_user1_AddDevice": null,
    "local_user1_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'Encrypted MQTT payload, sustained bidirectional small packets'; 'bidirectional MQTT packets without explicit status or error codes'; 'Sustained bidirectional MQTT packets without error or completion signal'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with sustained packets'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with no explicit status or error'. Reason: Traffic displays continuous bidirectional MQTT message exchanges specific to topic smart/mb/in/208580022462ab36ab23 consistent with device control activity, but lacks any explicit success, failure, error codes, or completion signals, preventing determination of operation outcome."
        ]
    ],
    "local_user1_RemoveDevice": [
        [
            "Operation result: Success. Evidence: ''type':'del'', 'success':true, 'status':'ok''. Reason: The MQTT payload consistently contains the deletion type indicating a delete command sent for device removal, matched by multiple HTTP POST responses showing 'success':true and 'status':'ok', confirming the operation completed successfully."
        ]
    ],
    "local_user1_SharePlug": [
        [
            "Operation result: Failed. Evidence: ''success':false,'errorCode':'REPETITION_SHARE','errorMsg':'This device has already been shared with the user.''. Reason: Majority consensus indicates SharePlug operation failed due to the device already being shared, evidenced by explicit payload error fields 'success':false, 'errorCode':'REPETITION_SHARE', and the clear message confirming the device was already shared."
        ],
        [
            "Operation result: Success. Evidence: ''success':true,'result':{'receiverName':'user2'}. Reason: Majority consensus shows SharePlug succeeded, confirmed by explicit success code 'success':true and 'result' containing the receiverName 'user2', consistently indicating a successful share addition."
        ]
    ],
    "local_user1_UnsharePlug": [
        [
            "Operation result: Success. Evidence: ''success':true,'status':'ok'' in /m/sharing/device/remove'; ''success':true,'status':'ok'' in /m/sharing/device/remove payload; 'POST /api.json/smartlife/m/sharing/device/remove' with {'success':true,'status':'ok'}; ''success':true,'status':'ok'' in /m/sharing/device/remove API response; ''success':true,'status':'ok'' in /api.json/smartlife/m/sharing/device/remove payload. Reason: The decisive presence of a consistent success indication ('success':true and 'status':'ok') in multiple payloads of the /m/sharing/device/remove API response confirms a consensus that the UnsharePlug operation completed successfully."
        ]
    ],
    "local_user2_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: '**user2_local mqtt packets on smart/mb/in topic without explicit status codes or keywords**'; '**mqtt topic smart/mb/in/208580022462ab36ab23 without explicit status codes or error messages**'; '**No explicit status codes or critical keywords related to DeviceControl in payloads**'; '**No explicit payload keywords or status codes related to 'DeviceControl' found**'. Reason: The operation status cannot be determined due to the absence of explicit success, failure, or error indicators in MQTT payloads related to device control despite detectable bidirectional encrypted traffic."
        ],
        [
            "Operation result: Undetermined. Evidence: '**user2_local mqtt packets on smart/mb/in topic without explicit status codes or keywords**'; '**MQTT topic smart/mb/in/208580022462ab36ab23 without explicit success or error codes**'; '**absence of explicit success/error payload or status codes in user2 local mqtt/tcp packets**'; '**Absence of operation-specific status codes or keywords in MQTT payloads despite multiple packets**'. Reason: The available packet data lacks explicit diagnostic messages, statuses, or error codes critical for determining the operation result, rendering the evaluation inconclusive."
        ]
    ],
    "remote_user2_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'bidirectional MQTT packets with consistent lengths but no explicit status or error codes'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with bidirectional packets but no explicit status or error'; 'bidirectional exchange, sustained data flow'; 'bidirectional MQTT traffic with sustained payload lengths without error codes'; 'mqtt topic smart/mb/in/208580022462ab36ab23 with bidirectional small packets but no explicit status'. Reason: Majority consensus indicates traffic shows sustained bidirectional MQTT exchanges related to user2 remote control with continuous data flow but lacks explicit success or failure payload indicators or protocol error codes, rendering operation outcome undetermined. One minority view interprets sustained bidirectional encrypted exchanges as success, but lacks explicit confirmation."
        ],
        [
            "Operation result: Undetermined. Evidence: 'single MQTT packet of minimal length with no protocol semantics'; 'single mqtt packet with no payload status or error'; 'single packet with minimal payload'; 'single MQTT packet with minimal payload'; 'single mqtt packet with minimal payload and no status codes'. Reason: Consensus identifies isolated single MQTT packets with minimal or absent payload lacking any status or error messages, insufficient to determine operation success or failure and leaving the outcome undetermined."
        ]
    ]
}
```

# State Semantic
## Base model
| State | Final Semantic Description                                                                                                            |
|-------|--------------------------------------------------------------------------------------------------------------------------------------|
| 0     | Initial state.                                                                                                                        |
| 1     | user1 has added the device once; user2 has no permissions, invitations, or control rights.                                             |
| 2     | Error state.                                                                                                                          |
| 3     | user1 has added the device once and shared the device directly with user2; user2 automatically has device-specific control permissions limited to this device instance without requiring acceptance. |

## Divergent model
| State | Final Semantic Description |
|-------|----------------------------|
| 0     | Initial state. No device added by user1 and no sharing or permissions configured for user2. |
| 1     | user1 has added the device once; user2 has no sharing invitations or control permissions. |
| 2     | Error state. Invalid or undefined state due to incorrect action sequence or failure. |
| 3     | user1 added the device once and directly shared it with user2, who is not a family member, granting user2 device-specific control permissions without requiring acceptance. |
| 4     | user1 added the device once and shared it with user2; user2 is performing remote device control with an undetermined outcome, implying user2 holds provisional device-specific control permissions under direct sharing. |
| 5     | user1 added the device once, shared it with user2 who had device-specific control permissions (undetermined control success), then revoked sharing; user2â€™s control permissions are consequently revoked. |
| 6     | user1 added the device once, shared it with user2 (undetermined control), then removed the device; device removal resets the addition count and revokes all user2 device-specific permissions. |

# Bug Reports
## Base model
No issues found.

## Divergent model
No issues found.