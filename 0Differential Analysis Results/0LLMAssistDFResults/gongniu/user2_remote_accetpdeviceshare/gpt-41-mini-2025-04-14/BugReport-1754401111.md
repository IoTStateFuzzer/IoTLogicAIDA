# BTB Semantic
```json
{
    "local_user1_AddDevice": null,
    "local_user1_DeviceControl": [
        [
            "Operation result: Success. Evidence: 'code':200', 'success':true' in HTTP PUT response; ''code':200', ''success':true', MQTT payloads with updated PowerSwitch values'. Reason: The consistent HTTP PUT responses with code 200 and success true demonstrate successful acceptance and execution of device control commands; matching MQTT payloads confirming updated PowerSwitch property values corroborate actual state changes."
        ]
    ],
    "local_user1_RemoveDevice": [
        [
            "Operation result: Success. Evidence: 'HTTP DELETE code:200, success:true'; 'DELETE ... code:200, success:true'; 'DELETE ... /devices/mHXk6DR3zDiKDwQd4vRo000000 with code 200 and success:true'; 'DELETE ...{'code':200,'success':true}'. Reason: The DELETE request explicitly returned HTTP 200 with success:true, consistently confirming device removal was successful."
        ]
    ],
    "local_user1_SharePlug": [
        [
            "Operation result: Success. Evidence: 'POST /mos/share/v1/devices code:200 success:true'. Reason: HTTP 200 status with success:true consistently confirms the sharing operation succeeded."
        ],
        [
            "Operation result: Failed. Evidence: 'POST /mos/share/v1/devices success:false'. Reason: Explicit presence of success:false clearly indicates share action failure."
        ]
    ],
    "local_user1_UnsharePlug": [
        [
            "Operation result: Success. Evidence: 'code':200','success':true','/mos/share/v1/devices/cancel'. Reason: HTTP 200 status with 'success':true in the response from the /mos/share/v1/devices/cancel endpoint confirms the unshare operation was executed successfully."
        ]
    ],
    "remote_user2_AcceptDeviceShare": [
        [
            ""
        ],
        [
            "Operation result: Success. Evidence: ''code':200', 'success':true'. Reason: The presence of HTTP 200 code combined with the explicit success flag true confirms that the AcceptDeviceShare operation succeeded."
        ],
        [
            "Operation result: Failed. Evidence: ''success':false'. Reason: The response consistently shows the success flag as false, indicating that the device share acceptance operation failed."
        ],
        [
            "Operation result: Failed. Evidence: ''success':false'. Reason: The response messages uniformly include success as false, confirming failure of the acceptance operation."
        ]
    ],
    "remote_user2_DeviceControl": [
        [
            "Operation result: Success. Evidence: ''code':200,'success':true' in HTTP PUT response'. Reason: HTTP 200 status code combined with 'success':true indicates that the device property was successfully set by the remote control command; corroborated by MQTT payloads reflecting the changed device state confirms effective execution."
        ],
        [
            ""
        ],
        [
            "Operation result: Failed. Evidence: ''code':9017,'success':false' in HTTP PUT response'. Reason: HTTP error code 9017 alongside 'success':false in the HTTP response provides clear indication of device control command rejection, affirming operation failure."
        ]
    ]
}
```

# State Semantic
## Base model
| State | Semantic Description |
|-------|----------------------|
| 0     | Initial state; user1 has not added the device and user2 has no permissions. |
| 1     | user1 has added the device once; user2 has not been invited and has no control permissions. |
| 2     | Error state. |
| 3     | user1 has added the device once and shared it directly with user2; user2 has been invited but has not yet accepted the invitation, so user2 has no control permissions. |
| 4     | user1 has added the device once and shared it directly with user2; user2 accepted the invitation manually and has control permissions limited to this device instance. |

## Divergent model
| State | Final Semantic Description |
|-------|----------------------------|
| 0     | Initial state; user1 has not added the device; user2 has no permissions or invitations. |
| 1     | user1 has added the device once; user2 is not invited and has no permissions. |
| 2     | Error state. |
| 3     | user1 has added the device once and shared the device directly with user2, who has been invited but has not yet accepted; user2 has no control permissions. |
| 4     | user1 has added the device once; user2 accepted the direct device share and currently has control permissions limited to this device instance. |
| 5     | user1 added the device once; after user2 accepted the share, user1 revoked sharing; user2 no longer has control permissions. |
| 6     | user1 added the device once, shared it with user2 who accepted, but user1 removed the device; user2's permissions are revoked due to device removal and user2 has no control. |
| 7     | user1 added the device once; after revoking and then resharing the device with user2, user2 currently has either (if accepted) direct sharing control permissions valid for this device instance, or (if not yet accepted) a pending invitation with no control permissions. |

# Bug Reports
## Base model
No issues found.

## Divergent model
No issues found.