# BTB Semantic
```json
{
    "local_user1_AddDevice": [
        [
            "Operation result: Success. Evidence: ''status':0,'msg':'ok'' in multiple HTTP POST responses'. Reason: The consistent presence of 'status':0 and 'msg':'ok' in multiple HTTP POST responses from various endpoints, including /vtproxy/common, /appsync/group/dev/manage, and local cloud APIs, confirms a successful AddDevice execution."
        ]
    ],
    "local_user1_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'no decisive payload or header keywords related to DeviceControl'; 'only short UDP packets without explicit control keywords or status codes'; 'Sustained UDP packets with increasing payload lengths but no explicit success or error keywords'; 'sustained bidirectional UDP packets without explicit payload keywords or status codes'; 'udp packets flow without explicit operation keywords or status codes'. Reason: The traffic captures uniformly lack explicit DeviceControl payload keywords or status codes necessary to determine operation success or failure, showing only UDP packets without clear operation outcome indicators."
        ]
    ],
    "local_user1_InviteToHome": [
        [
            "Operation result: Success. Evidence: ''error':0,'status':0,'msg':'ok'' in /appsync/group/member/invited/reqqrcode response'. Reason: Majority consensus confirms that the HTTP response with zero error and status, accompanied by 'ok' message, indicates the invitation operation succeeded successfully."
        ],
        [
            "Operation result: Success. Evidence: ''error':0,'status':0,'msg':'ok'' in /appsync/group/member/invited/reqqrcode response'. Reason: The unanimous matching zero error and status with 'ok' message demonstrate successful invite operation completion."
        ]
    ],
    "local_user1_RemoveDevice": null,
    "local_user1_RemoveFromHome": [
        [
            "Operation result: Success. Evidence: 'POST /appsync/group/member/delfamilymember error:0 msg:'ok''; ''error':0,'msg':'ok'' in /appsync/group/member/delfamilymember response'; ''error':0,'status':0,'msg':'ok'' in /appsync/group/member/delfamilymember response; 'POST /appsync/group/member/delfamilymember error=0 status=0 msg=ok'. Reason: Majority consensus confirms the delete member API returned error=0 and msg='ok', reflecting a successful removal from home. Consistent positive status codes (error=0, status=0) and clear 'ok' messages in the deletion response support this successful operation."
        ]
    ],
    "local_user2_DeviceControl": [
        [
            "Operation result: Success. Evidence: ''status':0' in payload and multiple DNA.TransmissionControl Response events'. Reason: The presence of 'status':0 within payloads unambiguously signals successful operations confirmed by repetitive DNA.TransmissionControl Response events, demonstrating consistent bidirectional control acknowledgments and indicating successful device command execution."
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            "Operation result: Undetermined. Evidence: 'UDP packets with no explicit control payload'. Reason: The UDP exchanges lack embedded control payloads or explicit success/failure codes, with encrypted continuous packet flow carrying no definitive status indicators, rendering the operation outcome inconclusive."
        ]
    ],
    "remote_user1_DeviceControl": null,
    "remote_user2_AcceptInvite": [
        [
            "Operation result: Success. Evidence: 'error':0,'status':0,'msg':'ok' in /appsync/group/member/invited/joinfamily response'. Reason: The majority consensus confirms successful invite acceptance as indicated by HTTP POST responses bearing zero error and status along with 'ok' messages; a minority report indicating a device reset error is noted but lacks sufficient agreement to override the success determination."
        ]
    ],
    "remote_user2_DeviceControl": [
        [
            ""
        ],
        [
            "Operation result: Success. Evidence: 'DNA.TransmissionControl Response with pwri values 0 and 1'; 'Response event with multiple bidirectional payloads indicating active interaction'; ''name':'Response', bidirectional exchange with multiple POSTs and responses'; 'DNA.TransmissionControl Response with pwri:1 indicating device accepted control'; ''name':'Response', 'POST /device/control/v2/sdkcontrol''. Reason: Majority control responses exhibit bidirectional, sustained payload exchanges with 'pwri' acknowledgments and valid 'Response' events confirming successful device control command execution."
        ],
        [
            ""
        ],
        [
            "Operation result: Failed. Evidence: 'ErrorResponse with status -7 and message 'device reset, please rebind''; ''name':'ErrorResponse', 'status':-7, 'message':'device reset, please rebind''; ''status':-7, 'device reset, please rebind''. Reason: Consistent presence of explicit 'ErrorResponse' containing status code -7 and reset message signifies failure caused by device reset requiring rebinding, blocking control operation."
        ]
    ],
    "remote_user2_QuitHome": [
        [
            "Operation result: Undetermined. Evidence: '/appsync/group/member/quitfamily' with error 0 and msg 'ok'; '/appsync/group/member/quitfamily' with {'error':0,'status':0,'msg':'ok'}'; '/appsync/group/member/quitfamily' with status -30107 and garbled msg; '/appsync/group/member/quitfamily' responded with {'status':-30107,'msg':'\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd'}'. Reason: Majority consensus shows both success with zero error and 'ok' message indicating successful quit operation, and failure indicators with negative status code -30107 and corrupted message indicating failure. The evidence reflects conflicting operation outcomes; therefore, the overall operation result is undetermined."
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ]
    ],
    "remote_user2_ScanQRCode": [
        [
            "Operation result: Success. Evidence: ''error':0,'msg':'ok''; ''error':0,'status':0,'msg':'ok''. Reason: Majority positive response with error=0 and msg='ok' indicates ScanQRCode succeeded with consistent success indicators in the payload."
        ],
        [
            "Operation result: Failed. Evidence: ''error':-2010''. Reason: Negative error code -2010 signifies ScanQRCode failure with consistent presence of this error code across evidence payloads."
        ],
        [
            "Operation result: Failed. Evidence: ''error':-2011''. Reason: Negative error code -2011 confirms unsuccessful ScanQRCode attempt, supported by uniform error code evidence in payloads."
        ]
    ]
}
```

# State Semantic
## Base model
| State | Final Semantic Description |
|-------|----------------------------|
| 0     | Initial state: no device added; user2 not invited and has no permissions. |
| 1     | user1 has added the device once; user2 is not invited and has no permissions. |
| 2     | Error state. |
| 3     | user1 has added the device once; user2 is invited as a family member but has not yet accepted; no control permissions granted. |
| 4     | user1 has not added the device; user2 is invited as a family member but has not yet accepted; no control permissions granted. |
| 5     | user1 has added the device once; user2 is invited as a family member, has scanned the invitation but has not accepted; no control permissions granted. |
| 6     | user1 has added the device once; user2 accepted the family invitation, is a family member with permanent control rights over all user1 devices regardless of device additions. |
| 7     | user1 has added the device once and re-invited user2; user2 accepted and remains family member with permanent control rights over all user1 devices. |
| 8     | user1 has not added the device; user2 accepted the family invitation and is a family member with permanent control rights over all user1 devices regardless of device additions. |
| 9     | user1 has not added the device; user2 re-invited and accepted the family invitation; user2 remains a family member with permanent control rights over all user1 devices. |
| 10    | user1 has not added the device; user2 scanned the family invitation but has not accepted; no control permissions granted. |
| 11    | user1 has added the device once; user2 accepted the family invitation but quit the family; user2 no longer has control rights. |
| 12    | user1 has not added the device; user2 accepted the family invitation but quit operation result is undetermined; user2â€™s family membership and control permissions status is unclear. |
| 13    | user1 has not added the device; user2 was re-invited as a family member but has not accepted; no control permissions granted. |
| 14    | user1 has added the device once and re-invited user2; user2 has not accepted; no control permissions granted. |

## Divergent model
| State | Final Semantic Description |
|-------|----------------------------|
| s0    | Initial state: no device added by user1; user2 not invited or recognized. |
| s1    | user1 added the device once; user2 not invited, no family membership or permissions. |
| s2    | Error state. |
| s3    | user1 invited user2 as family member; user2 has not scanned or accepted invitation; no device added; user2 has no control or family membership. |
| s4    | user1 invited user2 as family member; user2 scanned invitation QR code but has not accepted; no device added; user2 not yet family member; no control. |
| s5    | user1 invited user2 as family member; user2 scanned and accepted invitation; no device added yet; user2 is family member with permanent control rights pending device addition. |
| s6    | user1 sent multiple invitations to user2 as family member; user2 accepted the last invite; no device added; user2 is family member with permanent control rights. |
| s7    | user1 added device once; invited user2 who accepted invitation; user2 is family member with permanent control rights on all user1 devices, including current device. |
| s8    | user1 added device once; user2 scanned and accepted family invitation; user2 is family member with permanent control rights on device. |
| s9    | user1 invited user2 who scanned, accepted, then quit family; quit operation outcome undetermined; user2 membership and permissions uncertain; no device added. |
| s10   | user1 added device once; user2 scanned invitation QR but has not accepted; user2 is invited but not family member; no control granted. |
| s11   | user1 added device once; user2 invited but has neither scanned nor accepted invitation; user2 not family member; no control. |
| s12   | user1 added device once; user2 accepted family invitation then quit successfully; user2 lost family membership and control permissions. |
| s13   | user1 added device once; user2 invited multiple times, scanned once but not accepted latest invite; user2 not family member; no control. |
| s14   | user1 sent multiple invitations to user2; user2 scanned once but did not accept last invite; no device added; user2 not family member; no control. |
| s15   | user1 added device once; user2 accepted family invitation and actively controls the device; user2 is family member. |
| s16   | user1 added device once; user2 accepted invitation and controlled device; user1 removed device once; user2 remains family member but no device control after removal. |
| s17   | user1 added device once and removed it; user2 controlled device then quit family with undetermined result; user2 family membership and control status uncertain; no device present. |
| s18   | user1 added device twice (removed then re-added); user2 accepted invitation and quit family successfully; user2 no longer family member; no control rights currently. |
| s19   | user1 added device once; user2 accepted invitation, controlled device, then quit family confirmed; user2 no longer family member; no control. |
| s20   | user1 added device once; user2 quit family successfully and rescanned invitation; user2 invited but not accepted; no control. |
| s21   | user1 added device twice (removed and re-added); user2 quit family confirmed, rescanned invitation; user2 invited but has not accepted; no control. |
| s22   | user1 added device once; user2 quit family with undetermined quit result then rescanned invitation; user2 membership and control status uncertain. |
| s23   | user1 added device once; user2 quit family undetermined, rescanned invitation, user1 reinvited; user2 membership status uncertain; no guaranteed control. |
| s24   | user1 added device twice; user2 quit family successfully, rescanned invitation, reinvited by user1; user2 invited but not accepted; no control. |
| s25   | user1 added device once; user2 quit family successfully, rescanned invitation; reinvited by user1; user2 invited but not accepted; no control. |
| s26   | user1 added device once; user2 accepted invite and controlled device; user1 removed device; user2 remains family member but without current device control due to removal. |
| s27   | user1 added device once; user2 accepted and controlled device; user1 removed device; user2 quit family with undetermined result; membership and control uncertain; no device present. |
| s28   | user1 added device twice (remove and re-add); user2 accepted invite, controlled device then quit family confirmed; user2 no longer family member; no control rights. |
| s29   | user1 added device twice (remove then re-add); user2 accepted invitation, is family member; device re-added; user2 control restored per family priority rule. |
| s30   | user1 added device once; user2 accepted invite; user2 is family member currently controlling the device. |
| s31   | user1 added device once; user2 accepted invite and controlled device then quit family successfully; user2 no longer family member; no control. |
| s32   | user1 added device twice (remove then re-add); user2 accepted invitation and controlled device; user2 remains family member with permanent control rights on re-added device. |

# Bug Reports
## Base model
No issues found.

## Divergent model
No issues found.