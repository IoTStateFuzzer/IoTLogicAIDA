# BTB Semantic
```json
{
    "local_user1_AddDevice": [
        [
            "Operation result: Success. Evidence: '**'msg':'ok','status':0'**'. Reason: The evidence consistently shows explicit success markers with 'msg':'ok' and 'status':0 in the HTTP responses, confirming a successful AddDevice operation. While one instance included additional UDP flow context, the unanimous HTTP success indicators confirm the result."
        ]
    ],
    "local_user1_DeviceControl": [
        [
            "Operation result: Undetermined. Evidence: 'user1_local'. Reason: The dominant pattern shows packets with 'user1_local' that lack explicit success or error codes, rendering the control command outcome ambiguous, even though one instance exhibited bidirectional flow confirming the local command exchange."
        ]
    ],
    "local_user1_InviteToHome": [
        [
            "Operation result: Success. Evidence: '**invited/reqqrcode**'; '**11Abs_Len14|**'. Reason: The QR code response returning '11Abs_Len14|' together with the clear endpoint reference ('invited/reqqrcode') objectively confirms a valid invite operation."
        ],
        [
            "Operation result: Success. Evidence: '**'type':1**'. Reason: The consistent indication of a family member entry with 'type':1 in the member list confirms that the invitation was successfully processed."
        ]
    ],
    "local_user1_RemoveDevice": null,
    "local_user1_RemoveFromHome": [
        [
            "Operation result: Success. Evidence: ''msg':'ok''. Reason: The responses from the delfamilymember endpoint consistently include the raw fragment ''msg':'ok'', which confirms an error:0 status and indicates a successful removal operation. Although one report showed a subsequent query listing the removed user, the consensus evidence from the removal endpoint is dominant."
        ]
    ],
    "local_user2_DeviceControl": [
        [
            "Operation result: Success. Evidence: 'Response'. Reason: The HTTP POST operations consistently include the explicit 'Response' indicator\u2014whether as a standalone token or embedded within endpoint context\u2014demonstrating a clear control acknowledgment and confirming successful device control command execution."
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            "Operation result: Undetermined. Evidence: 'user2_local||udp'. Reason: The UDP flows marked by 'user2_local||udp' display routine bidirectional exchange without explicit control state indicators, resulting in an ambiguous outcome even though some packets exhibit characteristics, such as sustained communication, that could suggest success."
        ]
    ],
    "remote_user1_DeviceControl": null,
    "remote_user2_AcceptInvite": [
        [
            "Operation result: Success. Evidence: 'invited/joinfamily'. Reason: The response payloads consistently include the 'invited/joinfamily' fragment and convey error code 0 with an 'ok' message, which confirms the AcceptInvite operation successfully. "
        ]
    ],
    "remote_user2_DeviceControl": [
        [
            ""
        ],
        [
            "Operation result: Success. Evidence: ''Response''. Reason: The consistent occurrence of the 'Response' fragment in all packets indicates that valid control response data was received, supporting a successful DeviceControl execution."
        ],
        [
            ""
        ],
        [
            "Operation result: Failed. Evidence: ''ErrorResponse' with 'device reset, please rebind''. Reason: The explicit inclusion of an 'ErrorResponse' containing the message 'device reset, please rebind' in all packets confirms a failed DeviceControl operation."
        ]
    ],
    "remote_user2_QuitHome": [
        [
            "Operation result: Success. Evidence: ''msg':'ok''. Reason: The quitfamily responses consistently include 'msg':'ok', which unambiguously confirms a successful operation despite later network anomalies."
        ],
        [
            "Operation result: Success. Evidence: ''msg':'ok''. Reason: The responses uniformly provided an explicit 'msg':'ok' in the quitfamily payload, establishing majority consensus for a successful QuitHome action."
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            ""
        ],
        [
            "Operation result: Failed. Evidence: 'status -30107'. Reason: The quitfamily operation responses consistently returned a negative status (-30107), indicating a definitive failure in processing the QuitHome request."
        ]
    ],
    "remote_user2_ScanQRCode": [
        [
            "Operation result: Success. Evidence: ''msg':'ok''. Reason: The payload consistently includes the raw evidence ''msg':'ok'' which confirms the ScanQRCode operation succeeded."
        ],
        [
            "Operation result: Failed. Evidence: ''error':-2010''. Reason: The payload repeatedly contains the raw error code ''error':-2010'', indicating a failure in the ScanQRCode operation."
        ],
        [
            "Operation result: Failed. Evidence: ''error':-2011''. Reason: The repeated appearance of the raw error code ''error':-2011'' objectively confirms the ScanQRCode operation did not succeed."
        ]
    ]
}
```

# State Semantic
## Base model
| State | Final Semantic Description |
|-------|-----------------------------|
| s0 | Initial state. |
| s1 | Error state. |
| s2 | user1 added the device (device count = 1) and no invitation was initiated; user2 holds no permissions. |
| s3 | user1 added the device and sent an invitation; user2’s invitation is pending acceptance and thus no control is granted. |
| s4 | user1 initiated an invitation without adding a device; user2’s invitation remains pending. |
| s5 | user1 added the device and sent an invitation; user2 scanned the QR code but has not yet completed acceptance, so no control is conferred. |
| s6 | user1 added the device and sent an invitation; after scanning and accepting it, user2 becomes a family member with permanent control rights. |
| s7 | user1 added the device and issued multiple invitations, with the final invitation accepted; user2 is a confirmed family member with permanent control. |
| s8 | user1 issued an invitation without adding a device; user2 scanned and accepted the invitation, thereby becoming a family member with control rights. |
| s9 | user1 issued multiple invitations without adding a device, and user2 accepted one, establishing family membership. |
| s10 | user1 sent an invitation without adding a device and user2 scanned the QR code; however, without acceptance the invitation remains pending. |
| s11 | user1 sent an invitation that was accepted but then revoked via RemoveFromHome; user2’s family permission is accordingly revoked. |
| s12 | After revoking a previously accepted invitation, user1 added the device (device count = 1); user2 loses family control rights. |
| s13 | user1 added the device and sent an invitation that was accepted but later revoked via RemoveFromHome; user2 no longer retains permission. |
| s14 | user1 added the device and completed the invitation process (QR scan and acceptance), but then revoked user2’s family membership; user2’s control rights are removed. |
| s15 | user1 added the device and obtained an accepted invitation from user2, but then removed both user2 and the device (final device count = 0), leaving user2 without control. |
| s16 | user1 issued an invitation without adding a device that was accepted and then subsequently revoked; user2 ends without control rights. |
| s17 | user1 revoked a previously accepted invitation and then added the device (device count = 1); a subsequent QR scan led to a new invitation that remains unaccepted, so user2 gains no permission. |
| s18 | user1 added the device and sent an invitation that was accepted but later revoked; an additional QR scan by user2 does not reinstate any control rights. |
| s19 | user1 issued an invitation without adding a device; after user2 accepted and that permission was revoked, an extra QR scan does not restore any control. |
| s20 | user1 added the device and sent an invitation that was accepted, but user2 later quit home, thereby relinquishing permanent control rights. |
| s21 | user1 initially added the device and received an accepted invitation from user2, but then revoked sharing and cycled the device (removed then re-added to a final count of 1); user2 loses control rights. |
| s22 | user1 added the device and sent an invitation that was accepted, but later revoked user2’s family membership; as a result, user2’s permission is rescinded. |
| s23 | user1 added the device and processed an invitation that was accepted but then revoked; an extra QR scan by user2 does not restore permission, leaving user2 without control. |
| s24 | user1 sent an invitation that was accepted and then revoked via RemoveFromHome, and afterward added the device; user2 loses family membership. |
| s25 | user1 issued an invitation without adding a device that was accepted, but user2 subsequently quit home, ending the granted control rights. |
| s26 | user1 added the device (device count = 1) and sent an invitation that was accepted, but then revoked the invitation and removed the device (final count = 0); user2 loses control. |
| s27 | user1 added the device and sent an invitation that was accepted but later revoked, then removed the device (final count = 0); an extra QR scan by user2 does not reinstate permission. |
| s28 | user1 initially sent an invitation that was accepted and then revoked; after adding the device (device count = 1) a new invitation was issued following a QR scan, leaving user2 pending acceptance. |
| s29 | user1, without adding a device, issued an invitation that was accepted and then revoked, and subsequently initiated a new invitation after a QR scan; user2 remains in a pending state. |
| s30 | user1 added the device (device count = 1) and sent an invitation that was accepted but later revoked; after an additional QR scan and new invitation, user2’s acceptance remains pending. |
| s31 | user1 added the device and obtained an accepted invitation that was later revoked, then removed the device (final count = 0) before issuing a new invitation after a QR scan; user2 is pending acceptance. |
| s32 | user1 re-added the device (final count = 1 after removal) and issued a new invitation following a QR scan; user2’s invitation remains pending acceptance. |
| s33 | user1 issued an invitation without adding a device; although a QR scan occurred, no acceptance was completed, so user2 holds no control rights. |
| s34 | user1 added the device (device count = 1) and sent an invitation that was only partially processed (QR scanned without acceptance); user2 remains in a pending state with no control. |

# Bug Reports
## Base model
* No issues found.

## Divergent model
* No issues found.